<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="BookStoreTest" resourceRoot="" defaultScriptLanguage="Groovy" soapui-version="3.0.1" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="BookStoreService" type="rest" basePath="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:description/><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://9.123.157.115:9080</con:endpoint></con:endpoints><con:resource name="BookList" path="/books"><con:settings/><con:parameters/><con:method name="GetBookList" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books">book:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="GetBookListRequest_XML" mediaType="application/xml" accept="text/xml"><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request/><con:parameters/></con:request><con:request name="GetBookListRequest_JSON" mediaType="application/xml" accept="application/json"><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request/><con:parameters/></con:request></con:method></con:resource><con:resource name="Book" path="/books/1234"><con:settings/><con:parameters/><con:method name="GetBook" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/xml</con:mediaType><con:status>200</con:status><con:params/><con:element>book</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/bookstore/books/1234">ns:Response</con:element></con:representation><con:request name="GetBookRequest_XML" mediaType="application/xml" accept="text/xml"><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request/><con:parameters/></con:request><con:request name="GetBookRequest_JSON" mediaType="application/xml" accept="application/json"><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request/><con:parameters/></con:request></con:method></con:resource><con:resource name="CommentList" path="/books/1234/comments"><con:settings/><con:parameters/><con:method name="GetCommentList" method="GET"><con:settings/><con:parameters/><con:request name="GetCommentListRequest_XML" mediaType="application/xml" accept="text/xml"><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request/><con:parameters/></con:request><con:request name="GetCommentListRequest_JSON" mediaType="application/xml" accept="application/json"><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request/><con:parameters/></con:request></con:method><con:method name="AddComment" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/x-www-form-urlencoded</con:mediaType><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>text/xml</con:mediaType><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>multipart/form-data</con:mediaType><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="AddCommentRequest" mediaType="application/x-www-form-urlencoded" postQueryString="false"><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request>user=tester&amp;content=interesting</con:request><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite name="BookStoreService TestSuite"><con:description>TestSuite generated for REST Service [BookStoreService]</con:description><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="BookList TestCase" searchProperties="true" id="9d71c517-3ebe-43f6-858b-aece563c1078"><con:description>TestCase generated for REST Resource [BookList] located at [/books]</con:description><con:settings/><con:testStep type="restrequest" name="GetBookListRequest_XML"><con:settings/><con:config service="BookStoreService" resourcePath="/books" methodName="GetBookList" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetBookListRequest_XML" mediaType="application/xml" accept="text/xml"><con:settings/><con:endpoint>http://9.123.157.115:9080</con:endpoint><con:request/><con:assertion type="XPath Match"><con:configuration><path>//book[id='1234']/price/text()</path><content>29.0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="GetBookListRequest_JSON"><con:settings/><con:config service="BookStoreService" resourcePath="/books" methodName="GetBookList" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetBookListRequest_JSON" mediaType="application/xml" accept="application/json"><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request/><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>//assert the response header
assert messageExchange.responseHeaders["Content-Type"] == "application/json;charset=UTF-8";
assert messageExchange.responseHeaders["Cache-Control"] == "no-cache";

//assert the repsonse body
def booksRoot = net.sf.json.JSONSerializer.toJSON(messageExchange.responseContent);
def books = booksRoot.get("books");

//assert book detail
assert books[0].get("book").get("id") == "1234";
assert books[0].get("book").get("name") == "book1";
assert books[0].get("book").get("price") == 29;
</scriptText></con:configuration></con:assertion><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Book TestCase" searchProperties="true" id="d225a968-1e19-4af0-99b6-28797090a043"><con:description>TestCase generated for REST Resource [Book] located at [/books/1234]</con:description><con:settings/><con:testStep type="restrequest" name="GetBookRequest_XML"><con:settings/><con:config service="BookStoreService" resourcePath="/books/1234" methodName="GetBook" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetBookRequest_XML" mediaType="application/xml" accept="text/xml"><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request/><con:assertion type="XPath Match"><con:configuration><path>/book/price/text()</path><content>${#Project#book.price}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration></con:assertion><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="GetBookRequest_JSON"><con:settings/><con:config service="BookStoreService" resourcePath="/books/1234" methodName="GetBook" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetBookRequest_JSON" mediaType="application/xml" accept="application/json"><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request/><con:assertion type="GroovyScriptAssertion"><con:configuration><scriptText>//get property
def expectedID = context.expand('${#Project#book.id}');
def expectedName =  context.expand('${#Project#book.name}');
def expectedPrice = context.expand('${#Project#book.price}');

//assert the response header
assert messageExchange.responseHeaders["Cache-Control"] == "no-cache";

//assert the response body
def bookRoot = net.sf.json.JSONSerializer.toJSON(messageExchange.responseContent);
assert bookRoot.get("id") == expectedID;
assert bookRoot.get("name") == expectedName;
assert bookRoot.get("price") == 29.0;</scriptText></con:configuration></con:assertion><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommentList TestCase" searchProperties="true" id="61c1cbad-fe67-433a-87d8-dc59b5f029fd"><con:description>TestCase generated for REST Resource [CommentList] located at [/books/1234/comments]</con:description><con:settings/><con:testStep type="restrequest" name="GetCommentListRequest_XML"><con:settings/><con:config service="BookStoreService" resourcePath="/books/1234/comments" methodName="GetCommentList" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetCommentListRequest_XML" mediaType="application/xml" accept="text/xml"><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request/><con:assertion type="Simple Contains"><con:configuration><token>user1</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains"><con:configuration><token>user2</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="GetCommentListRequest_JSON"><con:settings/><con:config service="BookStoreService" resourcePath="/books/1234/comments" methodName="GetCommentList" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetCommentListRequest_JSON" mediaType="application/xml" accept="application/json"><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request/><con:assertion type="Simple NotContains"><con:configuration><token>user3</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains"><con:configuration><token>user4</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="AddCommentRequest"><con:settings/><con:config service="BookStoreService" resourcePath="/books/1234/comments" methodName="AddComment" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="AddCommentRequest" mediaType="application/x-www-form-urlencoded" postQueryString="false" accept=""><con:settings/><con:endpoint>http://localhost:9080</con:endpoint><con:request>user=tester&amp;content=interesting</con:request><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>book.id</con:name><con:value>1234</con:value></con:property><con:property><con:name>book.name</con:name><con:value>book1</con:value></con:property><con:property><con:name>book.price</con:name><con:value>29.0</con:value></con:property></con:properties><con:wssContainer/></con:soapui-project>